<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"><link rel="stylesheet" href="../assets/css/just-the-docs-default.css"> <script type="text/javascript" src="../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>HW04 ML Microservices | 17-313</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="HW04 ML Microservices" /><meta name="author" content="Michael Hilton and Rohan Padye" /><meta property="og:locale" content="en_US" /><meta name="description" content="website for CMU 17-313" /><meta property="og:description" content="website for CMU 17-313" /><link rel="canonical" href="../assignments/hw4" /><meta property="og:url" content="http://localhost:4000/assignments/hw4" /><meta property="og:site_name" content="17-313" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="HW04 ML Microservices" /> <script type="application/ld+json"> {"@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/17313_square.png"},"name":"Michael Hilton and Rohan Padye"},"headline":"HW04 ML Microservices","url":"http://localhost:4000/assignments/hw4","author":{"@type":"Person","name":"Michael Hilton and Rohan Padye"},"description":"website for CMU 17-313","@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="../" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../assignments/" class="nav-list-link">Assignments</a><ul class="nav-list "><li class="nav-list-item "><a href="../assignments/hw1" class="nav-list-link">HW01 Joining the team</a><li class="nav-list-item "><a href="../assignments/hw2" class="nav-list-link">HW02 Teamwork</a><li class="nav-list-item "><a href="../assignments/hw3" class="nav-list-link">HW03 Requirements</a><li class="nav-list-item active"><a href="../assignments/hw4" class="nav-list-link active">HW04 ML Microservices</a><li class="nav-list-item "><a href="../assignments/hw5" class="nav-list-link">HW05 Quality Assurance</a><li class="nav-list-item "><a href="../assignments/hw6" class="nav-list-link">HW06 Open Source Excursion</a></ul><li class="nav-list-item"><a href="../calendar/" class="nav-list-link">Calendar</a><li class="nav-list-item"><a href="../schedule/" class="nav-list-link">Schedule</a><li class="nav-list-item"><a href="../staff/" class="nav-list-link">Staff</a><li class="nav-list-item"><a href="../syllabus/" class="nav-list-link">Syllabus</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search 17-313" aria-label="Search 17-313" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="../assignments/">Assignments</a><li class="breadcrumb-nav-list-item"><span>HW04 ML Microservices</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="17-313-foundations-of-software-engineering"> <a href="#17-313-foundations-of-software-engineering" class="anchor-heading" aria-labelledby="17-313-foundations-of-software-engineering"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 17-313: Foundations of Software Engineering</h1><h2 id="homework-4-ml-microservices"> <a href="#homework-4-ml-microservices" class="anchor-heading" aria-labelledby="homework-4-ml-microservices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Homework 4: ML Microservices</h2><p>The key learning goals of this homework are that you are able to:</p><ul><li><p>Train and deploy a machine learning model using microservices.</p><li><p>Decide whether and when to use microservices, understanding benefits and limitations.</p><li><p>Write an effective design document.</p><li><p>Describe the architecture of a system using a suitable notation, using architectural views to represent software along different perspectives.</p><li><p>Assess and choose between alternative architectural decisions.</p><li><p>Engage meaningfully with questions of engineering ethics.</p></ul><h3 id="project-context-and-tasks"> <a href="#project-context-and-tasks" class="anchor-heading" aria-labelledby="project-context-and-tasks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Project context and Tasks</h3><p>You and your team are hard at work on the new graduate admissions system for CMU. During your most recent sprint planning meeting, your CMU technical contact bursts into the room, shouting, “Machine learning! Microservices!” When pressed, your newly buzzword-enamored boss explains: the population of applicants is too large, and increasing annually. Admissions is taking too much time and effort. Fortunately, CMU has been collecting student performance data. They continue: “Can’t your team make use of all that fancy new machine learning to help predict which applicants are more likely to succeed, helping the admissions process along? And since we’re checking off buzzwords, can’t you implement it as a microservice?”</p><p>You are correctly skeptical about the effort required to pivot the product in this new direction, but fortunately the somewhat disconnected microservice demand gives you a way to explore the idea without requiring a major up front change in the existing codebase. Instead, you’ll (1) develop this potential feature in isolation by training a machine learning model that predicts potential applicant success and deploying it as a microservice, and then (2) reason about, document, and choose between alternative designs that would allow you to integrate it into the existing codebase. Finally, you will (3) individually consider the ethical implications of the feature, and what questions you truly need to ask in QA to satisfy possible ethical concerns.</p><h3 id="starter-code-data-and-repository"> <a href="#starter-code-data-and-repository" class="anchor-heading" aria-labelledby="starter-code-data-and-repository"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Starter code, data, and repository</h3><p>Create a new team repository by following this link for your team, which will clone starter data and code:</p><p><a href="https://classroom.github.com/a/lfAWfv50">https://classroom.github.com/a/lfAWfv50</a></p><p>There is an example flask-based app, with associated docker file, in the dockerfile/apps folder. Use this as a template to build and deploy the microservice. You may wish to use <a href="https://towardsdatascience.com/a-flask-api-for-serving-scikit-learn-models-c8bcdaa41daa">this article</a> and <a href="https://github.com/amirziai/sklearnflask/">this repository</a> as resources on building and saving a scikit-learn model, and then deploying it using flask.</p><p>This starter code uses arguments from the query string (specifically age, health, and absences) to query the model. This can/should be expanded or replaced as a part of your implementation (note that the API also accepts JSON requests).</p><p>Note that the default flask service in the starter code should be run, and is accessible, on port 5000. The following commands should work to build the docker container and confirm that the service is running, but you should run these from the dockefile directory:</p><blockquote><p>docker build -t ml:latest .</p><p>docker run -d -p 5000:5000 ml</p><p>curl <a href="http://localhost:5000/predict">http://localhost:5000/predict</a></p></blockquote><h3 id="deadlines-and-deliverables"> <a href="#deadlines-and-deliverables" class="anchor-heading" aria-labelledby="deadlines-and-deliverables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deadlines and deliverables</h3><p>This homework has four (4) deadlines and four (4) deliverables. The first deadline (<strong>Friday, Oct 29th</strong>) is a <strong>checkpoint</strong> to make sure you are succeeding at building your microservice-based ML model. The second deadline (<strong>Tuesday, Nov 2nd</strong>) is for the <strong>complete trained model deployable as a microservice.</strong> The third deadline (<strong>Thursday, Nov 4th</strong>) is for <strong>a design document explaining how you would integrate the new feature into your existing codebase</strong>. The fourth deadline (<strong>Tuesday, Nov 9th</strong>) is for <strong>one (1) <em>individual</em> document making an ethical argument about the feature.</strong></p><p><strong>Part A: Development checkpoint - Group (due Friday, Oct 29th) - 5 points (~5%)</strong></p><p>To make sure that we can help you with any challenges that come up, we have a technical deployment checkpoint.</p><p>For this checkpoint, you should simply use the default model included in the sample code, and ensure you can build and deploy the default code using flask and Docker. Because this is just a checkpoint, the expectation is that you will hit this checkpoint, and then continue to work. Therefore, when you have completed this checkpoint, you should tag a version of your code as a release for version 0.1. You can find instructions as to how to do this here: <a href="https://help.github.com/en/articles/creating-releases">https://help.github.com/en/articles/creating-releases</a></p><p>Then, submit this tagged version to the associated Gradescope assignment.</p><p><strong>Part B: Microservice ML feature implementation and code-level documentation – Group (due Tuesday, Nov 2nd) – 55 points (~35%)</strong></p><p>We provide you with a starter repository (see above) with a (synthetic) historical dataset (as a csv file) of student performance (this is an augmented version of the dataset <a href="https://archive.ics.uci.edu/ml/datasets/Student+Performance">found here</a>), and a (bad) model trained over it. Start by exploring the data, to understand what information is available. Student performance is described by their grades (G1, G2, and G3), where G3 is the final year grade, the target performance metric. Grades are on a scale of 0-20; 20 is the best. CMU considers a high-quality student one with a G3 grade of 15 or higher.</p><p>The existing model in the repository is very simple. Once you have familiarized yourself with the dataset, explore this model using whatever means you think are appropriate and determine in which ways you don’t believe it to be suitable. Based on what you learn in this exploratory step, you should train a new model and build a deployable microservice.</p><p>You should evaluate your new model, and should explain how this model (overall) performs better than the baseline model, and any ways in which your model performs worse than the baseline model.</p><p>Plan some testing, perform that testing on your microservice, and document it. At least some of this testing should be automated.</p><p>The deliverable for this task is a documented technical artifact; submit a snapshot of your github repository to the Gradescope assignment. This should include:</p><p>(1) a trained model that is deployable as a microservice; the microservice must take as input a query request with student data and return a prediction about that student’s graduate school success. This is the API for your microservice. It should also include</p><p>(2) a README that clearly and concisely explains</p><p>(a) Clear documentation for your API. (How it should be called, what data it expects, any pre-conditions for the service, and how to understand the output).</p><p>(b) A description of which features you used in training your model, and how your retrained the model performs better than the baseline model</p><p>(c) deployment instructions; and</p><p>(d) an explanation and justification of the testing you have done on it.</p><p><strong>Part C: Design document – Group (due Thursday, Nov 4th) – 70 points (~40 %)</strong></p><p>Once you have implemented the feature in isolation, your next (group) task is to document it and argue for how it should be integrated into the design of the existing system. Effectively, your technical contact’s demand for microservices makes it straightforward to develop this feature in isolation, but it raises questions about how it should be integrated into your existing (relatively monolithic) Django-based web app. You have at least several options:</p><ol><li><p>Rewrite the web app using a different architecture (re-architect the overall Django app in some other way, cf the Twitter case study)</p><li><p>Rewrite the feature to fit more naturally into the Django-imposed architecture.</p><li><p>Mash a microservice into the Django architecture using some other mechanism.</p><li><p>????????</p></ol><p>Your deliverable for this part is a design document describing the feature and how it should be integrated into the system. Submit this to the assignment on Gradescope. (NOTE: you will not have to actually implement this decision, for this or any subsequent homework in this class. You might consider implementation effort as part of your tradeoff analysis, but you should not let speculation about your workload in this class influence your decision.)</p><p>The design document must (1) concisely describe the feature, (2) make and justify a decision on how the implementation should be done, including considered alternatives and tradeoffs, and using/referencing suitable diagrams where relevant to support your argument:</p><ol><li><p>Feature description. This should be concise (&lt; 0.5 pages).</p><li><p>Decision and architectural justification for how to integrate the feature into the system. This must include at least:</p><p>a. A <strong>concise, prioritized list of the overall <em>quality</em> requirements</strong> you considered in arguing for the integration of the feature into the system (&lt;0.5 pages, soft limit). You may consider and reference the requirements you elicited during HW3 as appropriate. Rank them in decreasing order of importance. This allows readers to quickly understand what requirements you were designing for.</p><p>b. <strong>A design decision with a textual justification of your design.</strong> (~3 pages, soft limit, including alternatives and tradeoffs, below) Outline and argue for a particular implementation choice as to how the feature should be integrated into the overall system architecturally. Justify your design decisions, including why your design is adequate for the quality attributes important to this system. The justification will typically take positions regarding questions such as: Which requirements are affected by the alternatives? Which system qualities are promoted or inhibited? What styles or tactics were considered? What are the tradeoffs between the alternative solutions? Which one is better in this context and why? What assumptions did you make in your design? A good justification will refer back to the architecture documentation to substantiate the argument.</p><p>c. <strong>Considered alternatives and tradeoffs.</strong> The design decision and justification <em>must</em> include description of considered alternatives, the tradeoffs they present, and why they were rejected. Tradeoffs must involve (but are not limited to) quality attributes that will be affected by the alternative. Justify such arguments with reference to appropriate diagrams (this provides traceability) and concrete examples, as appropriate.</p></ol><p><strong>On diagrams.</strong> The design document must include both diagrams and text. Diagrams should involve suitable architectural views; must include a legend; and should involve appropriate levels of abstraction for the components in the diagram. If necessary, use color/shape/text to differentiate between types of components and connectors. You may find it appropriate to merge more than one view into a single diagram. If you do this, you must be explicit about what views you are merging, and why. Otherwise, diagrams should clearly represent legitimate architectural views. Make sure that multiple views of the architecture are consistent with each other and the links are clear; if necessary provide a mapping in additional text.</p><p><em>Documenting Software Architectures: Views and Beyond, Second Edition</em> is a useful book on creating architecture documentation. It is available (for free) as an e-book from the CMU library web site. If you use it, treat it as reference material; do not plan to read major parts of it.</p><p>Drawing diagrams is easier with the right software. Consider tools like draw.io (free, online, and collaborative), Dia, OmniGraffle, MS Visio, or even just the drawing editor of Google Docs. Google Slides will also likely work for this purpose. Pictures of whiteboard drawings are also acceptable, if <em>clearly</em> readable.</p><p><strong>Additional Hints:</strong></p><ul><li><p>The design document task is easy to underestimate both in terms of time needed and in terms of difficulty designing meaningful and useful descriptions. While it is easy to create a superficial solution, a good solution will likely require significant thinking, discussion, and iteration. Feel free to seek feedback from the course staff on your solution before submission.</p><li><p>It may take several iterations to get your architectural views right. Appoint someone to track the accuracy and completeness of architectural representations throughout this assignment. Do not just divide up the views among your team members and assume they show everything needed. You only need to submit the final designs/documents, not intermediate steps on the process of getting there.</p><li><p>As additional reference material, <em>Software Architecture in Practice, Third Edition</em> is a book on software architecture that is available (for free) as an e-book from the CMU library web site. You may wish to review appropriate sections within <em>Part Two</em> to help find appropriate <em>tactics</em>, techniques you can use in your design to promote particular quality attributes. Note that the book is <em>not</em> a reading assignment and you should not try to read it thoroughly. Instead, <em>use it as reference material</em> and select particular bits of advice that are relevant to your situation.</p></ul><p><strong>Part D: Ethical Discussion – Individual (due Tuesday, Nov 9th) – 30 points (~20%)</strong></p><p><em>Note: this is not an open-ended reflection document like those we have requested in previous assignments. You must engage with the ethical questions at hand.</em></p><p>For this deliverable, we will ask you to think about potential ethical concerns with the technology that you are proposing to implement. You should consider the ethical implications from the perspective of all potential stakeholders. You might find it helpful to consider the questions we considered in class:</p><p>1) Does the software respect the humanity of the users?</p><p>2) Does my software amplify positive behavior, or negative behavior for both users and society at large</p><p>3) Could the software’s quality impact the humanity of others?</p><p>You should generate a list of potential ethical concerns for this system you are considering implementing.</p><p>For each concern, you should assess the risk of that concern (Remember risk is how likely it is to happen, and how bad would the outcomes be).</p><p>After assessing the risk, you should consider ways to address the ethical concern. For each concern, you should consider potential actions that could help address this concern, and safeguard against potential problems.</p><p>The deliverable for this task is a document (soft limit 3 pages), submitted to Gradescope that:</p><p>a) Reasons about ethical concerns when implementing an ML feature to help decide which students to accept to CMU.</p><p>b) An assessment of the risk for each ethical concern</p><p>c) A discussion of how to address each ethical concern.</p><p>d) A criteria that can be used to evaluate if the intervention described in part (c) is successful.</p><p><strong>Grading</strong></p><p>You will be graded as a team, with an individual component. This homework is worth 160 points. We will grade you based on the learning goals listed above.</p><p>To receive full credit for the checkpoint, we expect:</p><ul><li>That you have tagged a version in your github repo as a 0.1 release, and that this version will build a docker container with a trained model in Flask.</ul><p>To receive full credit for the technical artifacts, we expect:</p><ul><li><p>A working artifact that outperforms the baseline model</p><li><p>A discussion of how the new model was evaluated, and some evidence that it outperforms the baseline model</p><li><p>A test plan that describes how the microservice was tested. This test plan should include at least some automated tests.</p></ul><p>To receive full credit on the design document, we expect:</p><ul><li><p>The document to be dated.</p><li><p>A concise, accurate feature description.</p><li><p>A list of the quality requirements you considered, ranked in decreasing order of importance.</p><li><p>Appropriate use of at least two diagrams to support your design argument.</p><li><p>A clear decision with an accurate description of how you think the feature should be integrated into the current system (diagrams and text). Someone else should be able to read this description and understand where to start, implementation-wise. Do not say only “If X, then I’d choose design #1; otherwise, I’d choose design #2.” In the real world, decisions must be made on the basis of incomplete information, with an understanding that sometimes the wrong decision gets made. You can say what information you wish you had in order to better-inform your decision.</p><li><p>A good, substantive argument in favor of the design choice you made. This must include explicit description and consideration of alternatives, the substantiated (connected to quality attributes and other concerns) tradeoffs they afford, and reasons that you decided to reject them. These should be supported with technical arguments.</p><li><p>A thorough discussion of the tradeoffs among the options. If there are any situations in which your choice was the wrong one, what would those situations look like, and how would you know (after the fact) that this was the case?</p></ul><p>To receive full credit on the individual ethical reflection, we expect:</p><ul><li><p>A discussion of ethical concerns that considers a wide variety of stakeholders</p><li><p>That you can reason about potential ethical concerns before the emerge</p><li><p>Thoughtful consideration of what it would take to address these concerns</p></ul><hr><footer><p class="text-small text-grey-dk-100 mb-0">this website is based on https://github.com/kevinlin1/just-the-class</p></footer></div></div><div class="search-overlay"></div></div>
